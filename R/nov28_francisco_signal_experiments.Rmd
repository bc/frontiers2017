---
title: "Tests on jr3 and load cells with Francisco Nov 28"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
load_all()
#Testing JR3 force directions with Francisco Nov28
 test_xyz_forces <- as.data.frame(fread(get_Resilio_filepath("noiseResponse2017_11_28_12_44_14.txt")))
 p <- plot_measured_command_reference_over_time(test_xyz_forces)
 ggsave(to_output_folder("xyz_test_with_fingertip_manual_force.pdf"), p, width=90, height=30, limitsize=FALSE)
 summary(test_xyz_forces)
 boxplot(test_xyz_forces[,c(measured(muscle_names()), dots_to_underscores(force_column_names))])
```


```{r}
 #Testing by-muscle generators (2 replicates per muscle, from M0:M6) with Francisco Nov28
  test_muscle_forces_raw <- as.data.frame(fread(get_Resilio_filepath("noiseResponse2017_11_28_12_54_39.txt")))
  JR3_sensor_null <- colMeans(head(test_muscle_forces_raw, 100))
  test_muscle_forces <- zero_out_JR3_sensors(test_muscle_forces_raw, JR3_sensor_null)
  p <- plot_measured_command_reference_over_time(test_muscle_forces)
  ggsave("../../output/muscle_test_with_100g_2replicates.pdf", p, width=90, height=30, limitsize=FALSE)
summary(test_muscle_forces)
boxplot(summary(jr3_test_no_input_zero)
```


```{r}
 #Testing by-muscle generators (2 replicates per muscle, from M0:M6) with Francisco Nov28
  jr3_test_no_input <- as.data.frame(fread(get_Resilio_filepath("noiseResponse2017_11_28_13_03_28.txt")))

  p <- plot_measured_command_reference_over_time(jr3_test_no_input)
  ggsave("../../output/jr3_no_input_noise_check_raw.pdf", p, width=90, height=30, limitsize=FALSE)


  JR3_sensor_null <- colMeans(head(jr3_test_no_input, 10000))
  jr3_test_no_input_zero <- zero_out_JR3_sensors(jr3_test_no_input, JR3_sensor_null)
  p <- plot_measured_command_reference_over_time(jr3_test_no_input_zero)
  ggsave("../../output/jr3_no_input_noise_check_zeroed.pdf", p, width=90, height=30, limitsize=FALSE)
# zero'd out
  summary(jr3_test_no_input_zero)
  boxplot(jr3_test_no_input_zero)
```


```{r}
 #Second Test by-muscle generators (2 replicates per muscle, from M0:M6) with Francisco Nov28
  jr3_test_no_input <- as.data.frame(fread(get_Resilio_filepath("noiseResponse2017_11_28_13_14_55.txt")))
  jr3_test_no_input <- head(jr3_test_no_input,10000)
  ggplot(jr3_test_no_input[2000:3000,]) + geom_line(aes(time, JR3_FX), col="red")
  p <- plot_measured_command_reference_over_time(jr3_test_no_input)
  ggsave("../../output/jr3_no_input_noise_check_raw.pdf", p, width=90, height=30, limitsize=FALSE)

  JR3_sensor_null <- colMeans(head(jr3_test_no_input, 10000))
  jr3_test_no_input_zero <- zero_out_JR3_sensors(jr3_test_no_input, JR3_sensor_null)
  p <- plot_measured_command_reference_over_time(jr3_test_no_input_zero)
  ggsave("../../output/jr3_no_input_noise_check_zeroed.pdf", p, width=90, height=30, limitsize=FALSE)
# zero'd out

summary(jr3_test_no_input_zero)
boxplot(jr3_test_no_input_zero)



```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file).
